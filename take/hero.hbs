<div>
    <div class="layout-spacing">
        <div class="hd-header-wrapper">
            <div class="row" >                                
                <div class="col-md-12 text-center">
                    <div class="text-center mt-3 mb-3">
                        <a href="/view-page" class="btn btn-primary btn-sm" style="padding-bottom: 10px; font-size: 15px;">View Page</a>
                    </div>

                    <div class="panel__top">
                       
                    </div>
   
                    <div class="container " id="grapes-container" >
                        <div class="row pt-20">
                            <div class="col-md-6">
                                <h1 class="text-purple">Welcome to this website's new template!</h1>
                                <p class="lead">This is where you can add your content, such as text, images, videos, etc.</p>
                                <img src="/images/logo.png" alt="Example Image" class="img-fluid float-md-end mt-3 ms-md-3">
                            </div>
                        </div>
                        <div class="row mt-3 pt-3">
                            <div class="col-md-6">
                                <h2>About Kavenda</h2>
                                <p class="lead">Kavenda is a web design and development company dedicated to creating unique and innovative websites for our clients. We specialize in crafting customized solutions that meet the specific needs and goals of each client.</p>
                                <p class="lead">With our team of experienced designers and developers, we strive to deliver exceptional results that exceed expectations. Whether you need a simple portfolio website or a complex e-commerce platform, we have the expertise to bring your vision to life.</p>
                                <p class="lead">At Kavenda, we understand the importance of a strong online presence in today's digital world. That's why we work closely with our clients to understand their brand identity, target audience, and business objectives, ensuring that every website we create is tailored to their unique requirements.</p>
                                <p class="lead">Let us help you stand out from the crowd with a stunning and functional website that showcases your brand and drives results. Contact us today to discuss your project!</p>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>

{{#section 'css'}}
    <!-- BEGIN PAGE LEVEL PLUGINS/CUSTOM STYLES -->
    <link href="/assets/css/dashboard/no-site.css" rel="stylesheet" type="text/css" />
    <!-- END PAGE LEVEL PLUGINS/CUSTOM STYLES -->

    <link href="https://unpkg.com/grapick/dist/grapick.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//unpkg.com/grapesjs/dist/css/grapes.min.css">
	<style>
        
        .grapes-container-cv-canvas {
            top: 0;
            width: 1000px;
            height: 100%;
        }

        .panel__top {
            width: 88%;
            display: center;
            position: initial;
            justify-content: center;
            justify-content: space-between;
        }
        .panel__basic-actions {
            position: initial;
        }

    </style>
{{/section}}

{{#section 'scripts'}}
<script src="//unpkg.com/grapesjs"></script>
<script src="https://unpkg.com/grapesjs-preset-webpage@1.0.2"></script>
    <script src="https://unpkg.com/grapesjs-blocks-basic@1.0.1"></script>
    <script src="https://unpkg.com/grapesjs-plugin-forms@2.0.5"></script>
    <script src="https://unpkg.com/grapesjs-component-countdown@1.0.1"></script>
    <script src="https://unpkg.com/grapesjs-plugin-export@1.0.11"></script>
    <script src="https://unpkg.com/grapesjs-tabs@1.0.6"></script>
    <script src="https://unpkg.com/grapesjs-custom-code@1.0.1"></script>
    <script src="https://unpkg.com/grapesjs-touch@0.1.1"></script>
    <script src="https://unpkg.com/grapesjs-parser-postcss@1.0.1"></script>
    <script src="https://unpkg.com/grapesjs-tooltip@0.1.7"></script>
    <script src="https://unpkg.com/grapesjs-tui-image-editor@0.1.3"></script>
    <script src="https://unpkg.com/grapesjs-typed@1.0.5"></script>
    <script src="https://unpkg.com/grapesjs-style-bg@2.0.1"></script>

<script>
    const editor = grapesjs.init({
        container: '#grapes-container',
        height: '900px',
        width: 'auto',
     
        plugins: [
          'gjs-blocks-basic',
          'grapesjs-plugin-forms',
          'grapesjs-component-countdown',
          'grapesjs-plugin-export',
          'grapesjs-tabs',
          'grapesjs-custom-code',
          'grapesjs-touch',
          'grapesjs-parser-postcss',
          'grapesjs-tooltip',
          'grapesjs-tui-image-editor',
          'grapesjs-typed',
          'grapesjs-style-bg',
          'grapesjs-preset-webpage',
        ],
        pluginsOpts: {
          'gjs-blocks-basic': { flexGrid: true },
          'grapesjs-tui-image-editor': {
            script: [
              'https://cdnjs.cloudflare.com/ajax/libs/fabric.js/1.6.7/fabric.min.js',
              'https://uicdn.toast.com/tui.code-snippet/v1.5.2/tui-code-snippet.min.js',
              'https://uicdn.toast.com/tui-color-picker/v2.2.7/tui-color-picker.min.js',
              'https://uicdn.toast.com/tui-image-editor/v3.15.2/tui-image-editor.min.js'
            ],
            style: [
              'https://uicdn.toast.com/tui-color-picker/v2.2.7/tui-color-picker.min.css',
              'https://uicdn.toast.com/tui-image-editor/v3.15.2/tui-image-editor.min.css',
            ],
          },
          'grapesjs-tabs': {
            tabsBlock: { category: 'Extra' }
          },
          'grapesjs-typed': {
            block: {
              category: 'Extra',
              content: {
                type: 'typed',
                'type-speed': 40,
                strings: [
                  'Text row one',
                  'Text row two',
                  'Text row three',
                ],
              }
            }
          },
         
        },
        noticeOnUnload: 0,
        fromElement: true,
        storageManager: {
            type: 'remote',
            autosave: false,
            stepsBeforeSave: 1,
            autoload: false,
            contentTypeJson: true,
            storeComponents: true,
            storeStyles: true,
            storeHtml: true,
            storeCss: true,
            headers: {
              'Content-Type': 'application/json',
            },
            id: 'mycustom-',
            urlStore: '/save-page',
            urlLoad: '/view-page',
            }
    });

   
    editor.Panels.addPanel({
      id: 'basic-actions',
      el: '.panel__top',
      buttons: [
       
       {
          id: 'save-db',
          className: 'fa fa-floppy icon-floppy',
          command: 'save-db',
          label: '<u>Save</u>',
          attributes: {
              title: 'Save DB'
          }
        },{
          id: 'show-json',
          className: 'btn-show-json',
          label: 'JSON',
          context: 'show-json',
          command(editor) {
            editor.Modal.setTitle('Components JSON')
              .setContent(`<textarea style="width:100%; height: 250px;">
                ${JSON.stringify(editor.getComponents())}
              </textarea>`)
              .open();
          },
        }
      ],
    });
    var pn = editor.Panels;
    pn.addButton('options', {
        id: 'save-db',
        className: 'fa fa-floppy icon-floppy',
        command: function() { editor.runCommand('open-info') },
        attributes: {
          'title': 'About',
          'data-tooltip-pos': 'bottom',
        }
      });
      pn.addButton('options', {
        id: 'open-info',
        className: 'fa fa-question-circle',
        command: function() { editor.runCommand('save-db') },
        attributes: {
          'title': 'About',
          'data-tooltip-pos': 'bottom',
        }
      });

   editor.Commands.add('save-db', {
    run: function (editor, sender) {
        sender && sender.set('active', false); 
        var htmldata = editor.getHtml();
        var cssdata = editor.getCss();

        fetch('/save-page', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                html: htmldata,
                css: cssdata
            })
        })
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.json();
        })
        .then(data => {
            alert('Data saved successfully');
        })
        .catch(error => {
            alert('Error saving data');
        });
    }
});
    	
</script>


{{/section}}
